{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- heart icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">


<style>
  #custom-emoji-picker {
    display: none; /* hidden by default */
    position: absolute;
    bottom: 40px;
    left: 0;
    max-width: 250px;
    z-index: 999;
    background: white;
    border: 1px solid #ccc;
    border-radius: 0.25rem;
    padding: 0.5rem;
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  #custom-emoji-picker.show {
    display: flex;  /* visible when 'show' class is added */
  }
</style>

</head>

<body>
{% if messages %}
  <div class="position-fixed top-0 start-50 translate-middle-x mt-3" style="z-index: 1050; width: 100%; max-width: 600px;">
    {% for message in messages %}
      <div class="alert
        {% if message.tags == 'error' %}
          alert-danger
        {% else %}
          alert-{{ message.tags }}
        {% endif %}
        alert-dismissible fade show text-center mx-3" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    {% endfor %}
  </div>
{% endif %}

{% include "navbar.html" %}

<main class="flex-fill pb-5">
  {% block content %}
  {% endblock %}
</main>

{% include "footer.html" %}


<script>
document.addEventListener('DOMContentLoaded', function () {
  const emojiBtn = document.getElementById('emoji-btn');
  const picker = document.getElementById('custom-emoji-picker');
  const textarea = document.getElementById('my-textarea');

  if (!emojiBtn || !picker || !textarea) {
    console.error('Emoji picker elements missing!');
    return;
  }

  picker.classList.remove('show'); // hide initially

  emojiBtn.addEventListener('click', function (e) {
    e.stopPropagation();
    picker.classList.toggle('show');
  });

  picker.querySelectorAll('.emoji').forEach(emojiEl => {
    emojiEl.addEventListener('click', function () {
      const emoji = emojiEl.textContent;
      const start = textarea.selectionStart;
      const end = textarea.selectionEnd;
      const text = textarea.value;
      textarea.value = text.slice(0, start) + emoji + text.slice(end);
      textarea.selectionStart = textarea.selectionEnd = start + emoji.length;
      textarea.focus();
      picker.classList.remove('show');
    });
  });

  document.addEventListener('click', function (e) {
    if (!picker.contains(e.target) && e.target !== emojiBtn) {
      picker.classList.remove('show');
    }
  });
});

</script>

</body>

</html>